<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* Estilos para ocultar/mostrar os campos de cartão */
    .cartao-info {
      display: none;
    }
  </style>
</head>
<body>
<h1>Finalizar Compra</h1>

<!-- Formulário de pagamento e endereço -->
<form id="checkoutForm" th:action="@{/finalizarCompra}" th:method="post">
  <!-- Seletor de Endereço -->
  <h2>Escolha o Endereço de Entrega</h2>
  <select name="idEndereco" id="endereco" required>
    <option value="">Selecione um endereço</option>
    <th:block th:each="endereco : ${enderecos}">
      <option th:value="${endereco.idEndereco}" th:text="${endereco.logradouro + ', ' + endereco.cidade}"></option>
    </th:block>
  </select>

  <!-- Seletor de Forma de Pagamento -->
  <h2>Escolha a Forma de Pagamento</h2>
  <input type="radio" name="formaPagamento" id="cartao" value="Cartão de Crédito" required>
  <label for="cartao">Cartão de Crédito</label>
  <input type="radio" name="formaPagamento" id="boleto" value="Boleto" required>
  <label for="boleto">Boleto</label>

  <!-- Campos para Cartão de Crédito -->
  <div id="cartaoInfo" class="cartao-info">
    <h3>Informações do Cartão de Crédito</h3>
    <label for="numeroCartao">Número do Cartão:</label>
    <input type="text" name="numeroCartao" id="numeroCartao" required><br>

    <label for="nomeCartao">Nome no Cartão:</label>
    <input type="text" name="nomeCartao" id="nomeCartao" required><br>

    <label for="codigoVerificador">Código Verificador (CVV):</label>
    <input type="text" name="codigoVerificador" id="codigoVerificador" required><br>

    <label for="dataVencimento">Data de Vencimento:</label>
    <input type="month" name="dataVencimento" id="dataVencimento" required><br>

    <label for="parcelas">Parcelas:</label>
    <select name="parcelas" id="parcelas">
      <option value="1">1x</option>
      <option value="2">2x</option>
      <option value="3">3x</option>
      <option value="4">4x</option>
      <option value="5">5x</option>
      <option value="6">6x</option>
    </select>
  </div>

  <a th:href="resumoPedido">Ver Resumo do Pedido</a>
</form>

<script>
  // Exibe ou oculta os campos de cartão de crédito dependendo da seleção
  document.getElementById('cartao').addEventListener('change', function() {
    document.getElementById('cartaoInfo').style.display = 'block';
  });

  document.getElementById('boleto').addEventListener('change', function() {
    document.getElementById('cartaoInfo').style.display = 'none';
  });
</script>

</body>
</html>
